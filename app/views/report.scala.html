@(job: Job, 
    run: Run,
    articles: Iterable[URLReportArticle],
    user: User,
    errors: List[(String, String)] = List.empty)(implicit flash: Flash, req: Request[_])

@import org.w3.vs.view.Helper._
@import org.w3.vs.view._

@libs.main("Validator Suite", 
	stylesheets = List("dashboard.css"),
   scripts = List("model.js", "vs.js", "report.js", "dashboard.js")){
   
   @***** Header ******@
	
	@libs.header()
	
}{ @***** Content *****@ 
	
	@libs.admin(user)
	@libs.navigation("Report for job \"" + job.name +"\"", List((job.name ,"")))
	@libs.messages(errors)
	
	<hr>
	
	<section id="jobs" class="list">
		@libs.jobs(List((job, run)))
	</section>
	
	<section class="controls">
		<h2>Controls</h2>
		@**<h3>Report type</h3>
		<form class="group">
			<fieldset>
				<input name=group type=radio value="url.assertor" id="url.assertor" @if(req.queryString.get("group").flatten.isEmpty || req.queryString.get("group").flatten.exists(_ == "url.assertor")){checked}>
				<label for="url.assertor">Group by url</label>
				<input name=group type=radio value="message.url" id="message.url" @if(req.queryString.get("group").flatten.exists(_ == "message.url")){checked}>
				<label for="message.url">Group by message and url</label>
				<input name=group type=radio value="message.context" id="message.context" @if(req.queryString.get("group").flatten.exists(_ == "message.context")){checked}>
				<label for="message.context">Group by message and context</label>
				@**<input name=flat id=flat type=checkbox @if(req.queryString.get("flat").flatten.exists(_ == "on")){checked}>** @
				@**<label for="flat">flat</label>** @
			</fieldset>
			<button type=submit>Go</button>
		</form>**@
		<form method="post">
		@**{run.activity match {
		  case Running => {<button type="submit" name="action" value="stop" class="stop">Cancel</button>}
		  case Idle => {<button type="submit" name="action" value="run" class="run">Run</button>}
		}}**@
		</form>
		<h3>Find a url</h3>
		<form class="search">
			<input name=url type=text placeholder="Search url" required>
			<button type=submit>Go</button>
		</form>
	</section>
	
	<section id="report" class="list">
		
		<aside>
			<h2>Definitions</h2>
			<dl>
				<dt class="url"><dfn>URL</dfn></dt>
				<dd>def</dd>
				<dt class="date"><dfn>Last validated</dfn></dt>
				<dd>def</dd>
				<dt class="warnings"><dfn>Warnings</dfn></dt>
				<dd>def</dd>
				<dt class="errors"><dfn>Errors</dfn></dt>
				<dd>def</dd>
			</dl>
		</aside>
		
		@articles.map { case article =>
		<hr>
		<article>
			<dl>
				<dt>URL</dt>
				<dd class="url"><a href="@routes.Jobs.dispatcher(job.id)">@article.url</a></dd>
				<dt>Last validated</dt>
				<dd class="date">@article.lastValidated</dd>
				<dt>Warnings</dt>
				<dd class="warnings">@article.warnings</dd>
				<dt>Errors</dt>
				<dd class="errors">@article.errors</dd>
			</dl>
		</article>
		}
		
	</section>
	
	@**<nav class="report"><div>
	<span class="showing">Showing: @report.size / @pageNav.totalMessages</span>
	@if(pageNav.totalPages > 1) {
	<ul>
	@for(i <- 1 to pageNav.totalPages) {
		@if(i != pageNav.currentPage) {
		<li><a href="?p=@i&@req.rawQueryString">@i</a></li>
		} else {
		<li><b>@i</b></li>
		}
	}
	</ul>
	}
	</div></nav>**@
	
}{ @***** Footer *****@

	@libs.footer()

}
