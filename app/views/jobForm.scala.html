@(form: JobForm,
    user: User,
    idOpt: Option[JobId] = None)(implicit req: Request[AnyContent], flash: Flash)

@libs.main("New Job - Validator Suite"){

    @libs.admin(user)
    @libs.navigation(List((form("name").value.getOrElse("New Job"), "")))
    @libs.messages(form.errors.toList)
    
    <section id="jobForm">

    <h1>Create a new job</h1>

    <form method="post" action="@if(idOpt.isDefined){@routes.Job.dispatcher(idOpt.get)}else{@routes.Jobs.create}">
        <label for="name">Name</label>
        <input id="name" name="name" type="text" value="@form("name").value" required="required"/>

        <br>
        <label for="entrypoint">Start URL</label>
        <input id="entrypoint" name="entrypoint" type="url" value="@form("entrypoint").value" required="required"/>

        <br>
        <label for="maxResources">Max pages</label>
        <input id="maxResources" name="maxResources" type="range" min="1" max="500" value="@form("maxResources").value.getOrElse(100)"/>
        <output class="maxResources"></output>

        <br>
        @assertors.formValidatorHTML(form.assertorsConfiguration)
        @assertors.formValidatorNu(form.assertorsConfiguration)
        @assertors.formValidatorCSS(form.assertorsConfiguration)
        @assertors.formCheckerI18n(form.assertorsConfiguration)
        @**assertors.formCheckerMobile(form.assertorsConfiguration)**@

        <button type="submit" name="action" value="create" formaction="@routes.Jobs.create">Create</button>

        @**if(idOpt.isDefined) {
        <input type="submit" name="action" value="Update" formaction="@routes.Job.dispatcher(idOpt.get)"/>
        } else {
        <button type="submit" name="action" value="create" formaction="@routes.Jobs.create">Create</button>
        }**@

    </form>

    <script>
        require(["libs/jquery"], function () {
        $(function (){
            var slider = $("input#maxResources");
            var output = $("output.maxResources");
            slider.change(function (){
                output.html(slider.attr("value"));
            });
            slider.change();

            $('input[name=assertor[]] + fieldset').each(function (){
                var fold = $('<a class="jsFold">Options</a>');
                fold.click(function (){
                    $(this).toggleClass('folded');
                });
                $(this).before(fold);
            });
        });
        });
    </script>

    </section>
    
}{ @***** Footer *****@

    @libs.footer()()

}
