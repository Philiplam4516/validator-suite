@(job: Option[Job] = None, assertions: Option[Iterable[AssertorResult]] = None)(errors: List[(String, String)] = List())(implicit userOpt: Option[User], flash: Flash)

@libs.main("Validator Suite", 
	stylesheets = List("dashboard.css"), 
	scripts = List("dashboard.js", "report.js"),
	exec = """$(function(){window.Report = new ReportView();});""") {
	
	@libs.header(userOpt)
	
	<nav id="nav">
		<ul>
			<li><a href="@routes.Dashboard.dashboard">Dashboard</a></li>
			<li><a href="@routes.Dashboard.editJob(None)">Add new job</a></li>
		</ul>
	</nav>
	
	<section id="main"><div>
		@libs.navigation()
		
		@flash.data.map { case (key, message) =>
			<div class="@key vsmessage">@message</div>
		}
		
		@errors.map { case (key, message) =>
			<div class="@key vsmessage">@message</div>
		}
		
		<section id="report"><div>
		
		
		<br>
		@if(assertions.isDefined) {
		  @assertions.get.collect{case sertion: Assertions =>
		
		<details>
			<summary>
				<a href="#">@sertion.url</a>
				<ul>
					<li>Errors: @sertion.numberOfErrors</li>
					<li>Warnings: @sertion.numberOfWarnings</li>
					<li>Timestamp: @sertion.timestamp</li>
				</ul>
			</summary>
			<ul class="messages">
			@defining(sertion.assertions) { raws =>
			@raws.map { raw =>
				<li class="@raw.severity" lang="@raw.lang">@raw.title</li>
			}}
			</ul>
		</details>
		
		  }
		}
		

		
		
		</div></section>
		
	</div></section>
	
	@libs.footer()
	
}
